!function e(t,s,o){function n(c,i){if(!s[c]){if(!t[c]){var r="function"==typeof require&&require;if(!i&&r)return r(c,!0);if(a)return a(c,!0);var m=new Error("Cannot find module '"+c+"'");throw m.code="MODULE_NOT_FOUND",m}var u=s[c]={exports:{}};t[c][0].call(u.exports,function(e){var s=t[c][1][e];return n(s?s:e)},u,u.exports,e,t,s,o)}return s[c].exports}for(var a="function"==typeof require&&require,c=0;c<o.length;c++)n(o[c]);return n}({1:[function(e,t,s){var o={scope:null,inject:["$scope","$routeParams","$http","$location","homeService","companyService"],controller:function(e,t,s,n,a,c){this.scope=o.scope=e,this.scope.$routeParams=t,this.scope.$http=s,this.scope.$location=n,this.scope.$on("$viewContentLoaded",function(){ga("send","pageview")}),this.scope.homeService=a,this.scope.companyService=c},services:{homeService:e("./services/home.service"),companyService:e("./services/company.service")},routes:{"/:data":{templateUrl:"company.html",controller:"companyService"},"/":{templateUrl:"home.html",controller:"homeService"}}};e("./angularify")(o)},{"./angularify":2,"./services/company.service":5,"./services/home.service":6}],2:[function(e,t,s){var o=function(e,t){return function(){var s=e.scope.module=e.scope[t];s.name=t,s.scope=e.scope,s.init()}};t.exports=function(e){window&&(window.app=e),e.module=angular.module("app",["ngRoute"]),e.controller.$inject=e.inject;for(var t in e.services)e.module.factory(t,e.services[t]);e.module.config(["$routeProvider","$locationProvider",function(t,s){s.html5Mode(!0);var n,a;for(n in e.routes)a=e.routes[n],a.controller=o(e,a.controller),t.when(n,a)}])}},{}],3:[function(e,t,s){t.exports=[{name:"Archer",username:"Archer",default_text:"Phrasing!",icon_url:"http://i.imgur.com/CyIgnqi.png"},{name:"Bender",username:"Bender",default_text:"Bite my shiny metal ass!",icon_url:"http://i.imgur.com/ujLzN83.png"},{name:"Consuela",username:"Consuela",default_text:"No... no...",icon_url:"http://i.imgur.com/R04JzaK.png"},{name:"Darth Vader",username:"Darth Vader",default_text:"I find your lack of faith disturbing.",icon_url:"http://i.imgur.com/nFF8aMZ.png"},{name:"Doge",username:"Doge",default_text:"Wow",icon_url:"http://i.imgur.com/nowR2aL.png"},{name:"Erlich",username:"Erlich",default_text:"I own 10%",icon_url:"http://i.imgur.com/nrpxhEu.png"},{name:"God",username:"God",default_text:"I work in mysterious ways.",icon_url:"http://i.imgur.com/kXWkKnx.png"},{name:"HAL 9000",username:"HAL 9000",default_text:"I'm sorry Dave, I can't do that.",icon_url:"http://i.imgur.com/hkePqGh.png"},{name:"Ian Malcolm",username:"Ian Malcolm",default_text:"Life... uh... finds a way.",icon_url:"http://i.imgur.com/A5QHqhb.png"},{name:"James Bond",username:"James Bond",default_text:"The name's Bond. James Bond.",icon_url:"http://i.imgur.com/GrcYQM8.png"},{name:"Kanye",username:"Kanye",default_text:"Imma let you finish...",icon_url:"http://i.imgur.com/3XCE47J.png"},{name:"Leia",username:"Leia",default_text:"You have your moments. Not many of them, but you do have them.",icon_url:"http://i.imgur.com/xhjtOum.png"},{name:"Lumbergh",username:"Lumbergh",default_text:"That'd be greaaat.",icon_url:"http://i.imgur.com/kzQzqgQ.png"},{name:"Macgyver",username:"Macgyver",default_text:"If I had some duct tape, I could fix that.",icon_url:"http://i.imgur.com/P7qmT5w.png"},{name:"Marge",username:"Marge",default_text:"Mmmmm",icon_url:"http://i.imgur.com/Jpl5mCd.png"},{name:"Mr T",username:"Mr T",default_text:"I pity the fool.",icon_url:"http://i.imgur.com/TnRAbzk.png"},{name:"Mufasa",username:"Mufasa",default_text:"Everything the light touches...",icon_url:"http://i.imgur.com/LkiiVUH.png"},{name:"Pepper Brooks",username:"Pepper Brooks",default_text:"That's a bold strategy, Cotton. Let's see if it pays off.",icon_url:"http://i.imgur.com/5p9HfYi.png"},{name:"Picard",username:"Picard",default_text:"Make it so!",icon_url:"http://i.imgur.com/6p75aZY.png"},{name:"Ralph",username:"Ralph",default_text:"Me fail English? That unpossible!",icon_url:"http://i.imgur.com/SwMY73j.png"},{name:"Slowpoke",username:"Slowpoke",default_text:"Hey guys! Did you hear?",icon_url:"http://i.imgur.com/4tGWkf1.png"},{name:"Teal'c",username:"Teal'c",default_text:"Indeed",icon_url:"http://i.imgur.com/O1cmHrm.png"},{name:"Tina",username:"Tina",default_text:"Errrggggggg",icon_url:"http://i.imgur.com/VxDC1dz.png"},{name:"Tyler Durden",username:"Tyler Durden",default_text:"You wanna make an omelet, you gotta break some eggs.",icon_url:"http://i.imgur.com/yobU0zo.png"},{name:"Yoda",username:"Yoda",default_text:"Hmmmm, yes.",icon_url:"http://i.imgur.com/gwpP78v.png"},{name:"Zoidberg",username:"Zoidberg",default_text:"That was bad and you should feel bad.",icon_url:"http://i.imgur.com/XLt6zv1.png"}]},{}],4:[function(e,t,s){t.exports=klass(function(){}).methods({init:function(){}})},{}],5:[function(e,t,s){var o=e("./base.service");s=t.exports=function(){return new n};var n=o.extend({init:function(){this.supr(),window.scrollTo(0,0);var t=decodeURIComponent(this.scope.$routeParams.data);localStorage.setItem("company",t),this.scope.company=JSON.parse(atob(t)),this.scope.channels=null,this.scope.teamMembers=null,this.scope.company.slack?(this.scope.$http.get("https://slack.com/api/channels.list?exclude_archived=1&token="+this.scope.company.slack).success(function(e){this.scope.channels=e.channels.map(function(e){return e.displayName=e.name,e}),this.scope.defaultChannel=this.scope.channels[0],this.scope.$http.get("https://slack.com/api/groups.list?exclude_archived=1&token="+this.scope.company.slack).success(function(e){e.groups.forEach(function(e){e.displayName=e.name+" (private)",this.scope.channels.push(e)}.bind(this))}.bind(this))}.bind(this)),this.scope.$http.get("https://slack.com/api/users.list?token="+this.scope.company.slack).success(function(e){this.scope.teamMembers=e.members,this.scope.cloneTarget=null}.bind(this))):this.scope.company.hipchat&&(this.scope.defaultChannel=""),this.scope.characters=e("../models/characters");var s=localStorage.getItem("customCharacters");this.scope.customCharacters=s?JSON.parse(s):[],window.onkeydown=function(e){27==e.keyCode&&document.getElementById("filter").select()}.bind(this)},newMessage:function(e){this.scope.customCharacter||(this.scope.message={character:e,text:e.default_text,channel:this.scope.defaultChannel},setTimeout(function(){document.getElementById("message-text").select()},1))},postMessage:function(){return ga("send","event","button","click","post message"),""==this.scope.message.channel||void 0==this.scope.message.channel?(alert("You need to specify the room/channel."),void document.querySelector("#message-channel").focus()):("object"==typeof this.scope.message.channel&&(this.scope.defaultChannel=this.scope.message.channel,this.scope.message.channel=this.scope.message.channel.name),this.scope.sending=!0,void this.scope.$http.post("/create",{company:this.scope.company,message:this.scope.message}).success(function(e){this.hideMessage()}.bind(this)).error(function(e){alert("Your message could not be posted."),this.scope.sending=!1}.bind(this)))},hideMessage:function(){this.scope.sending=!1,this.scope.message=null},newCustomCharacter:function(e){this.hideMessage(),this.scope.customCharacter=void 0!==e?e:{name:"Name",icon_url:""},void 0==this.scope.customCharacter.default_text&&(this.scope.customCharacter.default_test="Hello"),setTimeout(function(){document.getElementById("custom-character-name").select()},1)},editCustomCharacter:function(e){this.scope.customCharacter=e,setTimeout(function(){document.getElementById("custom-character-name").select()},1)},saveCustomCharacter:function(){var e=this.scope.customCharacter;e.username=e.name.replace(/[^a-zA-Z_'"\s!@#$%^&*()-+=?]*/,""),e.custom=!0,this.scope.customCharacters.indexOf(e)>-1?this.scope.customCharacters[this.scope.customCharacters.indexOf(e)]=e:this.scope.customCharacters.push(e),localStorage.setItem("customCharacters",JSON.stringify(this.scope.customCharacters)),this.scope.customCharacter=null,this.newMessage(e)},cancelEditCustomCharacter:function(){this.scope.customCharacter=null},deleteCustomCharacter:function(e){confirm("Delete "+e.name+"?")&&(this.scope.customCharacters.splice(this.scope.customCharacters.indexOf(e),1),localStorage.setItem("customCharacters",JSON.stringify(this.scope.customCharacters)),this.hideMessage())},cloneTeamMember:function(e){if(null!=e){var t;this.scope.company.slack?t={name:this._cloneTeamMemberName(e.name),icon_url:"http://mustachify.me/?src="+encodeURIComponent(e.profile.image_192)}:this.scope.company.hipchat&&(t={name:this._cloneTeamMemberName(e.name),icon_url:"https://www.hipchat.com/img/silhouette_125.png"}),this.newCustomCharacter(t)}},_cloneTeamMemberName:function(e){var t,s,o={n:"ñ",i:"í",a:"á",e:"é",o:"ó",u:"ú"};for(t in o)if(s=o[t],e.indexOf(t)>0)return e.replace(t,s);return e}})},{"../models/characters":3,"./base.service":4}],6:[function(e,t,s){var o=e("./base.service");s=t.exports=function(){return new n};var n=o.extend(function(){}).methods({init:function(){this.supr(),this.scope.errors={},this.scope.company={name:"",slack:!1,hipchat:!1},this.scope.service="slack";var e=localStorage.getItem("company");e&&(this.scope.previousCompany=JSON.parse(atob(e)),this.scope.previousCompany.data=e)},pickService:function(e){this.scope.service=e,"slack"==e?(document.getElementById("slack-token").style.display="block",document.getElementById("slack-tab").className="active",document.getElementById("hipchat-token").style.display="none",document.getElementById("hipchat-tab").className="",document.getElementById("slack-token-input").select()):"hipchat"==e&&(document.getElementById("hipchat-token").style.display="block",document.getElementById("hipchat-tab").className="active",document.getElementById("slack-token").style.display="none",document.getElementById("slack-tab").className="",document.getElementById("hipchat-token-input").select())},createCompany:function(){if(""==this.scope.company.token)return this.scope.errors.token="is missing",void document.getElementById(this.scope.service+"-token-input").focus();switch(this.scope.service){case"slack":this.scope.company.slack=this.scope.company.token;break;case"hipchat":this.scope.company.hipchat=this.scope.company.token}var e=btoa(JSON.stringify(this.scope.company));this.scope.$location.path("/"+encodeURIComponent(e))}})},{"./base.service":4}]},{},[1]);